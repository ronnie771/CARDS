(this["webpackJsonpreal-app"]=this["webpackJsonpreal-app"]||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"a":"https://mycards10.herokuapp.com/api"}')},42:function(e,a,t){e.exports=t(81)},47:function(e,a,t){},48:function(e,a,t){},81:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(19),s=t.n(c),i=(t(47),t(4)),l=t(5),o=t(7),m=t(6),u=(t(48),t(8)),d=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={},e}return Object(l.a)(t,[{key:"render",value:function(){var e=this.props.user;return n.a.createElement("nav",{className:"navbar  navbar-expand-lg navbar-light bg-transperant"},n.a.createElement("div",{className:"container iconz"},!e&&n.a.createElement(u.b,{className:"nav-item nav-link",to:"/"},n.a.createElement("i",null,"Home")),e&&e.biz&&n.a.createElement(u.b,{className:"nav-item nav-link",to:"/homeuser"},n.a.createElement("i",null,"Home")),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse d-lg-flex ",id:"navbarNav"},n.a.createElement("ul",{className:"navbar-nav"},n.a.createElement("li",{className:"nav-item "},n.a.createElement(u.c,{className:"nav-item nav-link",to:"/about"},"About")),n.a.createElement("li",{className:"nav-item"},e&&e.biz&&n.a.createElement(u.c,{className:"nav-item nav-link",to:"/my-cards"},"My Cards")),n.a.createElement("li",{className:"nav-item"},e&&e.biz&&n.a.createElement(u.c,{className:"nav-item nav-link ",to:"/create-card"},"create"))),n.a.createElement("ul",{className:"navbar-nav ml-auto"},!e&&n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{className:"nav-item"},n.a.createElement(u.c,{className:"nav-item nav-link navbar-right",to:"/signin"},"Login")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(u.c,{className:"nav-item nav-link",to:"/biz-signup"},"Sign up"))),e&&n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{className:"nav-item"},n.a.createElement(u.c,{className:"nav-item nav-link",to:"/logout"},"Logout")))))))}}]),t}(r.Component),p=function(){return n.a.createElement("p",{className:"border-top pt-3 text-center"},"All rights reserved to Ronnie michayev  \xa9 ",(new Date).getFullYear())},b=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={},e}return Object(l.a)(t,[{key:"render",value:function(){this.props.user;return n.a.createElement("div",{className:"container hcont"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-sm-6 titlez"},n.a.createElement("h1",null,"MyCards"),n.a.createElement("p",null,"Create your own Bussiness cards "),n.a.createElement("p",null,"with all the info you want to present about your business! ")),n.a.createElement("div",{className:"col-sm-6 btncontainer"},n.a.createElement(u.b,{className:"btn btn-primary homebtn ",role:"button",to:"/signin"}," Login"),n.a.createElement(u.b,{className:"btn btn-primary homebtn",role:"button",to:"/biz-signup"}," Signup"))))}}]),t}(r.Component),h=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={},e}return Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement("p",null,"Content example text for about page here."))}}]),t}(r.Component),v=t(9),f=t.n(v),E=t(12),g=t(3),y=t.n(g),N=t(27),w=t(21),O=t(41),j=t(23),z=["name","label","error","placeholder"],k=function(e){var a=e.name,t=e.label,r=e.error,c=e.placeholder,s=Object(j.a)(e,z);return n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:a},t),n.a.createElement("input",Object.assign({},s,{name:a,id:a,placeholder:c,className:"form-control"})),r&&n.a.createElement("span",{className:"text-danger errz"},r))},x=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={data:{},errors:{}},e.validate=function(){var a=y.a.validate(e.state.data,e.schema,{abortEarly:!1}).error;if(!a)return null;var t,r={},n=Object(O.a)(a.details);try{for(n.s();!(t=n.n()).done;){var c=t.value;r[c.path[0]]=c.message}}catch(s){n.e(s)}finally{n.f()}return r},e.validateProperty=function(a){var t=a.name,r=a.value,n=Object(w.a)({},t,r),c=Object(w.a)({},t,e.schema[t]),s=y.a.validate(n,c).error;return s?s.details[0].message:null},e.handleSubmit=function(a){a.preventDefault();var t=e.validate();e.setState({errors:t||{}}),t||e.doSubmit()},e.handleChange=function(a){var t=a.currentTarget,r=Object(N.a)({},e.state.errors),n=e.validateProperty(t);n?r[t.name]=n:delete r[t.name];var c=Object(N.a)({},e.state.data);c[t.name]=t.value,e.setState({data:c,errors:r})},e}return Object(l.a)(t,[{key:"renderButton",value:function(e){return n.a.createElement("button",{enabled:this.validate(),className:"btn btn-primary btnf"},e)}},{key:"renderInput",value:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",r=arguments.length>3?arguments[3]:void 0,c=this.state,s=c.data,i=c.errors;return n.a.createElement(k,{type:t,name:e,placeholder:r,value:s[e],label:a,onChange:this.handleChange,error:i[e]})}}]),t}(r.Component),C=t(20),S=t.n(C),I=t(18),A=t(16),P=t(40),B=t.n(P);function D(){return(D=Object(E.a)(f.a.mark((function e(a,t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.post("".concat(A.a,"/auth"),{email:a,password:t});case 2:r=e.sent,n=r.data,localStorage.setItem("token",n.token);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q={login:function(e,a){return D.apply(this,arguments)},getCurrentUser:function(){try{var e=localStorage.getItem("token");return B()(e)}catch(a){return null}},logout:function(){localStorage.removeItem("token")},getJwt:function(){return localStorage.getItem("token")}};S.a.defaults.headers.common["x-auth-token"]=q.getJwt(),S.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=403&&I.b.error("An unexpected error occurrred."),Promise.reject(e)}));var M={get:S.a.get,post:S.a.post,put:S.a.put,patch:S.a.patch,delete:S.a.delete},T=t(10),_=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={data:{email:"",password:"",name:""},errors:{}},e.schema={email:y.a.string().required().email().label("Email"),password:y.a.string().required().min(6).label("Password"),name:y.a.string().required().min(2).label("Name")},e.doSubmit=Object(E.a)(f.a.mark((function a(){var t;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=e.state.data).biz=!1,a.prev=2,a.next=5,M.post("".concat(A.a,"/users"),t);case 5:Object(I.b)("A new acoount is opened"),e.props.history.replace("/signin"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),a.t0.response&&400===a.t0.response.status&&e.setState({errors:{email:"Email is taken"}});case 12:case"end":return a.stop()}}),a,null,[[2,9]])}))),e}return Object(l.a)(t,[{key:"render",value:function(){return q.getCurrentUser()?n.a.createElement(T.a,{to:"/"}):n.a.createElement("div",{className:"container formz"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("p",null,"You can open new account for free!")),n.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST"},n.a.createElement("i",{className:"far fa-address-card primary fa-4x"},n.a.createElement("h5",null,"Sign up")),this.renderInput("email","Email","email"),this.renderInput("password","Password","password"),this.renderInput("name","Name"),this.renderButton("Signup"))))}}]),t}(x),U=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={data:{email:"",password:""},errors:{}},e.schema={email:y.a.string().required().email().label("Email"),password:y.a.string().required().min(6).label("Password")},e.doSubmit=Object(E.a)(f.a.mark((function a(){var t,r,n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state.data,r=t.email,n=t.password,a.prev=1,a.next=4,q.login(r,n);case 4:window.location="/homeuser",a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),a.t0.response&&400===a.t0.response.status&&e.setState({errors:{email:a.t0.response.data}});case 10:case"end":return a.stop()}}),a,null,[[1,7]])}))),e}return Object(l.a)(t,[{key:"render",value:function(){return q.getCurrentUser()?n.a.createElement(T.a,{to:"/homeuser"}):n.a.createElement("div",{className:"container formz"},n.a.createElement("div",{className:"row rowf"},n.a.createElement("div",{className:"col-12"},n.a.createElement("p",{className:"p"}," Login with your account ")),n.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST"},n.a.createElement("i",{className:"far fa-address-card primary fa-4x"},n.a.createElement("h5",null,"login")),this.renderInput("email","Email","email"),this.renderInput("password","Password","password"),n.a.createElement("div",null,n.a.createElement("br",null)," ",this.renderButton("Login")))))}}]),t}(x),F=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(l.a)(t,[{key:"componentDidMount",value:function(){q.logout(),window.location="/"}},{key:"render",value:function(){return null}}]),t}(r.Component),L=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={data:{email:"",password:"",name:""},errors:{}},e.schema={email:y.a.string().required().email().label("Email"),password:y.a.string().required().min(6).label("Password"),name:y.a.string().required().min(2).label("Name")},e.doSubmit=Object(E.a)(f.a.mark((function a(){var t;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=e.state.data).biz=!0,a.prev=2,a.next=5,M.post("".concat(A.a,"/users"),t);case 5:return a.next=7,q.login(t.email,t.password);case 7:window.location="/create-card",a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),a.t0.response&&400===a.t0.response.status&&e.setState({errors:{email:"Email is taken"}});case 13:case"end":return a.stop()}}),a,null,[[2,10]])}))),e}return Object(l.a)(t,[{key:"render",value:function(){return q.getCurrentUser()?n.a.createElement(T.a,{to:"/"}):n.a.createElement("div",{className:"container formz"},n.a.createElement("div",{className:"row rowf"},n.a.createElement("div",{className:"col-12"},n.a.createElement("p",{className:"p"},"Sign up and Create your Bussiness Card! ")),n.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST"},n.a.createElement("i",{className:"far fa-address-card primary fa-4x"},n.a.createElement("h5",null,"Sign up")),this.renderInput("email","Email","email"),this.renderInput("password","Password","password"),this.renderInput("name","Name"),this.renderButton("Next"))))}}]),t}(x);var J={createCard:function(e){return M.post("".concat(A.a,"/cards"),e)},getMyCards:function(){return M.get("".concat(A.a,"/cards/my-cards"))},editCard:function(e){var a=e._id;return delete e._id,M.put("".concat(A.a,"/cards/").concat(a),e)},getCard:function(e){return M.get("".concat(A.a,"/cards/").concat(e))},deleteCard:function(e){var a=e._id;return delete e._id,M.delete("".concat(A.a,"/cards/").concat(a),e)}},H=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={data:{bizName:"",bizDescription:"",bizAddress:"",bizPhone:"",bizImage:""},errors:{}},e.schema={bizName:y.a.string().min(2).max(255).required(),bizDescription:y.a.string().min(2).max(1024).required(),bizAddress:y.a.string().min(2).max(400).required(),bizPhone:y.a.string().min(9).max(10).required().regex(/^0[2-9]\d{7,8}$/),bizImage:y.a.string().min(11).max(1024).uri().allow("")},e.doSubmit=Object(E.a)(f.a.mark((function a(){var t;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=e.state.data).bizImage||delete t.bizImage,a.next=4,J.createCard(e.state.data);case 4:Object(I.b)("A new card is opened"),e.props.history.replace("/my-cards");case 6:case"end":return a.stop()}}),a)}))),e}return Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"container formz"},n.a.createElement("div",{className:"row "},n.a.createElement("div",{className:"col-12"},n.a.createElement("p",{className:"titlecreate"},"Create your first Biz card"))),n.a.createElement("div",{className:"row "},n.a.createElement("div",{className:"col-lg-6"},n.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST"},this.renderInput("bizName","Business Name"),this.renderInput("bizDescription","Business Description"),this.renderInput("bizAddress","Business Address"),this.renderInput("bizPhone","Business Phone","undefined"," 03..,050..,052.."),this.renderInput("bizImage","Business Image","undefined","insert image URL / leave blank  "),this.renderButton("Create Card")))))}}]),t}(x),Y=(t(76),["path","component","render"]),$=function(e){e.path;var a=e.component,t=e.render,r=Object(j.a)(e,Y),c=q.getCurrentUser();return n.a.createElement(T.b,Object.assign({},r,{render:function(e){return!c||r.biz&&!c.biz?n.a.createElement(T.a,{to:{pathname:"/signin",state:{from:e.location}}}):a?n.a.createElement(a,e):t(e)}}))},R=function(e){var a=e.card;return n.a.createElement("div",{className:"col-md-6 col-lg-4 mt-3"},n.a.createElement("div",{className:"card"},n.a.createElement("img",{className:"p-2",src:a.bizImage,width:"300",height:"250",alt:a.bizName}),n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"card-title"},a.bizName),n.a.createElement("p",{className:"card-text"},a.bizDescription),n.a.createElement("p",{className:"card-text border-top pt-2"},n.a.createElement("b",null,"Tel: "),a.bizPhone,n.a.createElement("br",null),a.bizAddress),n.a.createElement(u.b,{to:"/my-cards/edit/".concat(a._id)},"Edit")," |",n.a.createElement(u.b,{className:"ml-2",to:"/my-cards/delete/".concat(a._id)},"Delete"))))},V=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={cards:[]},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(E.a)(f.a.mark((function e(){var a,t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.getMyCards();case 2:a=e.sent,(t=a.data).length>0&&this.setState({cards:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.cards;return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("p",null,"Your cards in the list below..."))),n.a.createElement("div",{className:"row"},e.length>0&&e.map((function(e){return n.a.createElement(R,{key:e._id,card:e})}))))}}]),t}(r.Component),W=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={data:{bizName:"",bizDescription:"",bizAddress:"",bizPhone:"",bizImage:""},errors:{}},e.schema={_id:y.a.string(),bizName:y.a.string().min(2).max(255).required(),bizDescription:y.a.string().min(2).max(1024).required(),bizAddress:y.a.string().min(2).max(400).required(),bizPhone:y.a.string().min(9).max(10).required().regex(/^0[2-9]\d{7,8}$/),bizImage:y.a.string().min(11).max(1024).uri().allow("")},e.doSubmit=Object(E.a)(f.a.mark((function a(){var t;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state.data,a.next=3,J.editCard(t);case 3:Object(I.b)("Card is Updated"),e.props.history.replace("/my-cards");case 5:case"end":return a.stop()}}),a)}))),e.handleCancel=function(){e.props.history.push("/my-cards")},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(E.a)(f.a.mark((function e(){var a,t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.id,e.next=3,J.getCard(a);case 3:t=e.sent,r=t.data,this.setState({data:this.mapToViewModel(r)});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mapToViewModel",value:function(e){return{_id:e._id,bizName:e.bizName,bizDescription:e.bizDescription,bizAddress:e.bizAddress,bizPhone:e.bizPhone,bizImage:e.bizImage}}},{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("p",null,"Fill out card details here"))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-6"},n.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST"},this.renderInput("bizName","Business Name"),this.renderInput("bizDescription","Business Description"),this.renderInput("bizAddress","Business Address"),this.renderInput("bizPhone","Business Phone"),this.renderInput("bizImage","Business Image"),this.renderButton("Update Card"),n.a.createElement("button",{className:"btn btn-secondary ml-2",onClick:this.handleCancel},"Cancel")))))}}]),t}(x),G=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={},e}return Object(l.a)(t,[{key:"render",value:function(){this.props.user;return n.a.createElement("div",{className:"container "},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-sm-6 titlez"},n.a.createElement("h1",null,"MyCards"),n.a.createElement("p",null,"Create your own Bussiness cards "),n.a.createElement("p",null,"with all the info you want to present about your business! ")),n.a.createElement("div",{className:"col-sm-6 btncontainer"},n.a.createElement(u.b,{className:"btn btn-primary homebtn ",role:"button",to:"/create-card"}," create"),n.a.createElement(u.b,{className:"btn btn-primary homebtn",role:"button",to:"/my-cards"}," my cards"))))}}]),t}(r.Component),K=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=a.call.apply(a,[this].concat(n))).state={},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=q.getCurrentUser();this.setState({user:e})}},{key:"render",value:function(){var e=this.state.user;return n.a.createElement(n.a.Fragment,null,n.a.createElement(I.a,null),n.a.createElement("header",null,n.a.createElement(d,{user:e})),n.a.createElement("main",{style:{minHeight:900}},n.a.createElement(T.d,null,n.a.createElement($,{path:"/my-cards/edit/:id",component:W,biz:!0}),n.a.createElement($,{path:"/my-cards/delete/:id",component:V,biz:!0}),n.a.createElement($,{path:"/my-cards",component:V,biz:!0}),n.a.createElement($,{path:"/create-card",exact:!0,component:H,biz:!0}),n.a.createElement($,{path:"/homeuser",component:G,biz:!0}),n.a.createElement(T.b,{path:"/biz-signup",component:L}),n.a.createElement(T.b,{path:"/logout",component:F}),n.a.createElement(T.b,{path:"/signin",component:U}),n.a.createElement(T.b,{path:"/signup",component:_}),n.a.createElement(T.b,{path:"/about",component:h}),n.a.createElement(T.b,{path:"/",exact:!0,component:b}))),n.a.createElement("footer",null,n.a.createElement(p,null)))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(77),t(78),t(38),t(79);s.a.render(n.a.createElement(u.a,null,n.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.7a286cd6.chunk.js.map