(this["webpackJsonpreal-app"]=this["webpackJsonpreal-app"]||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"a":"https://mycards10.herokuapp.com/api"}')},42:function(e,a,t){e.exports=t(81)},47:function(e,a,t){},48:function(e,a,t){},81:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(19),s=t.n(c),i=(t(47),t(4)),l=t(5),o=t(7),m=t(6),u=(t(48),t(11)),d=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={},e}return Object(l.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark shadow-sm"},r.a.createElement("div",{className:"container"},r.a.createElement(u.b,{className:"nav-item nav-link",to:"/"},"Real App"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.c,{className:"nav-item nav-link",to:"/about"},"About")),r.a.createElement("li",{className:"nav-item"},e&&e.biz&&r.a.createElement(u.c,{className:"nav-item nav-link",to:"/my-cards"},"My Cards")),r.a.createElement("li",{className:"nav-item"},e&&e.biz&&r.a.createElement(u.c,{className:"nav-item nav-link",to:"/create-card"},"create"))),r.a.createElement("ul",{className:"navbar-nav ml-auto"},!e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.c,{className:"nav-item nav-link",to:"/signin"},"Signin")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.c,{className:"nav-item nav-link",to:"/signup"},"Signup")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.c,{className:"nav-item nav-link",to:"/biz-signup"},"Business"))),e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.c,{className:"nav-item nav-link",to:"/logout"},"Logout")))))))}}]),t}(n.Component),p=function(){return r.a.createElement("p",{className:"border-top pt-3 text-center"},"Real App \xa9 ",(new Date).getFullYear())},b=function(){return r.a.createElement("div",{className:"lol"},r.a.createElement("h1",{className:"display-4"},"Welcome to MyCards"),r.a.createElement("p",null,"Create your own modified bussiness card here ,for your personal or your bussiness needs, in only a few easy steps.."),r.a.createElement("p",{className:"lead"},r.a.createElement("a",{className:"btn btn-primary btn-lg",href:"#",role:"button"},"Get Started!")))},v=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={},e}return Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container "},r.a.createElement(b,null))}}]),t}(n.Component),h=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={},e}return Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(b,null),r.a.createElement("p",null,"Content example text for about page here."))}}]),t}(n.Component),f=t(8),g=t.n(f),E=t(12),N=t(3),w=t.n(N),y=t(27),O=t(21),j=t(41),z=t(23),k=function(e){var a=e.name,t=e.label,n=e.error,c=Object(z.a)(e,["name","label","error"]);return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:a},t),r.a.createElement("input",Object.assign({},c,{name:a,id:a,className:"form-control"})),n&&r.a.createElement("span",{className:"text-danger"},n))},x=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={data:{},errors:{}},e.validate=function(){var a=w.a.validate(e.state.data,e.schema,{abortEarly:!1}).error;if(!a)return null;var t,n={},r=Object(j.a)(a.details);try{for(r.s();!(t=r.n()).done;){var c=t.value;n[c.path[0]]=c.message}}catch(s){r.e(s)}finally{r.f()}return n},e.validateProperty=function(a){var t=a.name,n=a.value,r=Object(O.a)({},t,n),c=Object(O.a)({},t,e.schema[t]),s=w.a.validate(r,c).error;return s?s.details[0].message:null},e.handleSubmit=function(a){a.preventDefault();var t=e.validate();e.setState({errors:t||{}}),t||e.doSubmit()},e.handleChange=function(a){var t=a.currentTarget,n=Object(y.a)({},e.state.errors),r=e.validateProperty(t);r?n[t.name]=r:delete n[t.name];var c=Object(y.a)({},e.state.data);c[t.name]=t.value,e.setState({data:c,errors:n})},e}return Object(l.a)(t,[{key:"renderButton",value:function(e){return r.a.createElement("button",{disabled:this.validate(),className:"btn btn-primary"},e)}},{key:"renderInput",value:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",n=this.state,c=n.data,s=n.errors;return r.a.createElement(k,{type:t,name:e,value:c[e],label:a,onChange:this.handleChange,error:s[e]})}}]),t}(n.Component),C=t(20),S=t.n(C),I=t(18),A=t(16),P=t(40),B=t.n(P);function D(){return(D=Object(E.a)(g.a.mark((function e(a,t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.post("".concat(A.a,"/auth"),{email:a,password:t});case 2:n=e.sent,r=n.data,localStorage.setItem("token",r.token);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q={login:function(e,a){return D.apply(this,arguments)},getCurrentUser:function(){try{var e=localStorage.getItem("token");return B()(e)}catch(a){return null}},logout:function(){localStorage.removeItem("token")},getJwt:function(){return localStorage.getItem("token")}};S.a.defaults.headers.common["x-auth-token"]=q.getJwt(),S.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=403&&I.b.error("An unexpected error occurrred."),Promise.reject(e)}));var T={get:S.a.get,post:S.a.post,put:S.a.put,patch:S.a.patch,delete:S.a.delete},M=t(9),_=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={data:{email:"",password:"",name:""},errors:{}},e.schema={email:w.a.string().required().email().label("Email"),password:w.a.string().required().min(6).label("Password"),name:w.a.string().required().min(2).label("Name")},e.doSubmit=Object(E.a)(g.a.mark((function a(){var t;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=e.state.data).biz=!1,a.prev=2,a.next=5,T.post("".concat(A.a,"/users"),t);case 5:Object(I.b)("A new acoount is opened"),e.props.history.replace("/signin"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),a.t0.response&&400===a.t0.response.status&&e.setState({errors:{email:"Email is taken"}});case 12:case"end":return a.stop()}}),a,null,[[2,9]])}))),e}return Object(l.a)(t,[{key:"render",value:function(){return q.getCurrentUser()?r.a.createElement(M.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement(b,{titleText:"Signup for Real App"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"You can open new account for free!"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST"},this.renderInput("email","Email","email"),this.renderInput("password","Password","password"),this.renderInput("name","Name"),this.renderButton("Signup")))))}}]),t}(x),F=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={data:{email:"",password:""},errors:{}},e.schema={email:w.a.string().required().email().label("Email"),password:w.a.string().required().min(6).label("Password")},e.doSubmit=Object(E.a)(g.a.mark((function a(){var t,n,r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state.data,n=t.email,r=t.password,a.prev=1,a.next=4,q.login(n,r);case 4:window.location="/",a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),a.t0.response&&400===a.t0.response.status&&e.setState({errors:{email:a.t0.response.data}});case 10:case"end":return a.stop()}}),a,null,[[1,7]])}))),e}return Object(l.a)(t,[{key:"render",value:function(){return q.getCurrentUser()?r.a.createElement(M.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement(b,{titleText:"Signin to Real App"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"You can signin here with your account!"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST"},this.renderInput("email","Email","email"),this.renderInput("password","Password","password"),this.renderButton("Signin")))))}}]),t}(x),U=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(l.a)(t,[{key:"componentDidMount",value:function(){q.logout(),window.location="/"}},{key:"render",value:function(){return null}}]),t}(n.Component),R=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={data:{email:"",password:"",name:""},errors:{}},e.schema={email:w.a.string().required().email().label("Email"),password:w.a.string().required().min(6).label("Password"),name:w.a.string().required().min(2).label("Name")},e.doSubmit=Object(E.a)(g.a.mark((function a(){var t;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=e.state.data).biz=!0,a.prev=2,a.next=5,T.post("".concat(A.a,"/users"),t);case 5:return a.next=7,q.login(t.email,t.password);case 7:window.location="/",a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),a.t0.response&&400===a.t0.response.status&&e.setState({errors:{email:"Email is taken"}});case 13:case"end":return a.stop()}}),a,null,[[2,10]])}))),e}return Object(l.a)(t,[{key:"render",value:function(){return q.getCurrentUser()?r.a.createElement(M.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement(b,{titleText:"Business Registration Form"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"Open business account for free!"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("form",{onClick:this.handleSubmit,autoComplete:"off",method:"POST"},this.renderInput("email","Email","email"),this.renderInput("password","Password","password"),this.renderInput("name","Name"),this.renderButton("Next")))))}}]),t}(x);var J={createCard:function(e){return T.post("".concat(A.a,"/cards"),e)},getMyCards:function(){return T.get("".concat(A.a,"/cards/my-cards"))},editCard:function(e){var a=e._id;return delete e._id,T.put("".concat(A.a,"/cards/").concat(a),e)},getCard:function(e){return T.get("".concat(A.a,"/cards/").concat(e))},deleteCard:function(e){var a=e._id;return delete e._id,T.delete("".concat(A.a,"/cards/").concat(a),e)}},Y=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={data:{bizName:"",bizDescription:"",bizAddress:"",bizPhone:"",bizImage:""},errors:{}},e.schema={bizName:w.a.string().min(2).max(255).required(),bizDescription:w.a.string().min(2).max(1024).required(),bizAddress:w.a.string().min(2).max(400).required(),bizPhone:w.a.string().min(9).max(10).required().regex(/^0[2-9]\d{7,8}$/),bizImage:w.a.string().min(11).max(1024).uri().allow("")},e.doSubmit=Object(E.a)(g.a.mark((function a(){var t;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=e.state.data).bizImage||delete t.bizImage,a.next=4,J.createCard(e.state.data);case 4:Object(I.b)("A new card is opened"),e.props.history.replace("/my-cards");case 6:case"end":return a.stop()}}),a)}))),e}return Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(b,{titleText:"Business Registration Form"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"Open business card"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST"},this.renderInput("bizName","Business Name"),this.renderInput("bizDescription","Business Description"),this.renderInput("bizAddress","Business Address"),this.renderInput("bizPhone","Business Phone"),this.renderInput("bizImage","Business Image"),this.renderButton("Create Card")))))}}]),t}(x),W=(t(76),function(e){e.path;var a=e.component,t=e.render,n=Object(z.a)(e,["path","component","render"]),c=q.getCurrentUser();return r.a.createElement(M.b,Object.assign({},n,{render:function(e){return!c||n.biz&&!c.biz?r.a.createElement(M.a,{to:{pathname:"/signin",state:{from:e.location}}}):a?r.a.createElement(a,e):t(e)}}))}),$=function(e){var a=e.card;return r.a.createElement("div",{className:"col-md-6 col-lg-4 mt-3"},r.a.createElement("div",{className:"card"},r.a.createElement("img",{className:"p-2",src:a.bizImage,width:"300",height:"250",alt:a.bizName}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},a.bizName),r.a.createElement("p",{className:"card-text"},a.bizDescription),r.a.createElement("p",{className:"card-text border-top pt-2"},r.a.createElement("b",null,"Tel: "),a.bizPhone,r.a.createElement("br",null),a.bizAddress),r.a.createElement(u.b,{to:"/my-cards/edit/".concat(a._id)},"Edit")," |",r.a.createElement(u.b,{className:"ml-2",to:"/my-cards/delete/".concat(a._id)},"Delete"))))},V=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={cards:[]},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(E.a)(g.a.mark((function e(){var a,t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.getMyCards();case 2:a=e.sent,(t=a.data).length>0&&this.setState({cards:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.cards;return r.a.createElement("div",{className:"container"},r.a.createElement(b,{titleText:"My Cards Page"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"Your cards in the list below..."))),r.a.createElement("div",{className:"row"},e.length>0&&e.map((function(e){return r.a.createElement($,{key:e._id,card:e})}))))}}]),t}(n.Component),G=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={data:{bizName:"",bizDescription:"",bizAddress:"",bizPhone:"",bizImage:""},errors:{}},e.schema={_id:w.a.string(),bizName:w.a.string().min(2).max(255).required(),bizDescription:w.a.string().min(2).max(1024).required(),bizAddress:w.a.string().min(2).max(400).required(),bizPhone:w.a.string().min(9).max(10).required().regex(/^0[2-9]\d{7,8}$/),bizImage:w.a.string().min(11).max(1024).uri().allow("")},e.doSubmit=Object(E.a)(g.a.mark((function a(){var t;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state.data,a.next=3,J.editCard(t);case 3:Object(I.b)("Card is Updated"),e.props.history.replace("/my-cards");case 5:case"end":return a.stop()}}),a)}))),e.handleCancel=function(){e.props.history.push("/my-cards")},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(E.a)(g.a.mark((function e(){var a,t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.id,e.next=3,J.getCard(a);case 3:t=e.sent,n=t.data,this.setState({data:this.mapToViewModel(n)});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mapToViewModel",value:function(e){return{_id:e._id,bizName:e.bizName,bizDescription:e.bizDescription,bizAddress:e.bizAddress,bizPhone:e.bizPhone,bizImage:e.bizImage}}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(b,{titleText:"Edit Card Form"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"Fill out card details here"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST"},this.renderInput("bizName","Business Name"),this.renderInput("bizDescription","Business Description"),this.renderInput("bizAddress","Business Address"),this.renderInput("bizPhone","Business Phone"),this.renderInput("bizImage","Business Image"),this.renderButton("Update Card"),r.a.createElement("button",{className:"btn btn-secondary ml-2",onClick:this.handleCancel},"Cancel")))))}}]),t}(x),H=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=q.getCurrentUser();this.setState({user:e})}},{key:"render",value:function(){var e=this.state.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,null),r.a.createElement("header",null,r.a.createElement(d,{user:e})),r.a.createElement("main",{style:{minHeight:900}},r.a.createElement(M.d,null,r.a.createElement(W,{path:"/my-cards/edit/:id",component:G,biz:!0}),r.a.createElement(W,{path:"/my-cards/delete/:id",component:V,biz:!0}),r.a.createElement(W,{path:"/my-cards",component:V,biz:!0}),r.a.createElement(W,{path:"/create-card",exact:!0,component:Y,biz:!0}),r.a.createElement(M.b,{path:"/biz-signup",component:R}),r.a.createElement(M.b,{path:"/logout",component:U}),r.a.createElement(M.b,{path:"/signin",component:F}),r.a.createElement(M.b,{path:"/signup",component:_}),r.a.createElement(M.b,{path:"/about",component:h}),r.a.createElement(M.b,{path:"/",exact:!0,component:v}))),r.a.createElement("footer",null,r.a.createElement(p,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(77),t(78),t(38),t(79);s.a.render(r.a.createElement(u.a,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.bab5764c.chunk.js.map